<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dual Deck Vinyl Tempo Helper — v17 (click ±0,1 • 1 decimal)</title>
  <style>
    :root{
      --bg:#0d0f10;
      --panel:#121416;
      --ink:#e9edf1;
      --muted:#9aa3ad;
      --muted2:#6b7380;
      --accent:#73a7ff;
      --accent-2:#2563eb;
      --chip:#a7c4ff;
      --chip-bg:#151922;
      --rail:#14181d;
      --rail-edge:#0e1013;
      --tick:#505968;
      --tick-strong:#9aa3ad;
      --handle:#1e293b;
      --handle-inner:#020617;
      --handle-glow:rgba(59,130,246,.65);
      --bpm-bg:#020617;
      --bpm-border:#111827;
      --delta-pos:#86efac;
      --delta-neg:#f97373;
      --delta-soft-pos:#22c55e;
      --delta-soft-neg:#fb7185;
      --shadow-soft:0 18px 45px rgba(0,0,0,.65);
      --shadow-inner:inset 0 0 0 1px rgba(148,163,184,.4);
      --badge-bg:#0f172a;
      --badge-border:#1d283a;
      --glow-soft:0 0 24px rgba(59,130,246,.5);
      --btn-bg:#0f172a;
      --btn-border:#1e293b;
      --btn-hover:#111827;
      --btn-active:#020617;
      --btn-text:#e5e7eb;
      --btn-accent:#60a5fa;
      --grid-line:#111827;
      --grid-dot:#1e293b;
      --danger:#f97373;
      --safe:#4ade80;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      min-height:100vh;
      background:radial-gradient(circle at top,#1f2937 0,#020617 52%);
      color:var(--ink);
      font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text",system-ui,sans-serif;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:18px;
    }
    .app-frame{
      width:100%;
      max-width:1220px;
      background:radial-gradient(circle at top,#111827 0,var(--panel) 45%,#020617 100%);
      border-radius:28px;
      padding:20px 24px 22px;
      box-shadow:var(--shadow-soft);
      border:1px solid rgba(148,163,184,.35);
      position:relative;
      overflow:hidden;
    }
    .grid-bg{
      position:absolute;inset:0;opacity:.32;pointer-events:none;
      background-image:
        linear-gradient(to right, rgba(15,23,42,0.85) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(15,23,42,0.85) 1px, transparent 1px);
      background-size:48px 48px;
      mix-blend-mode:soft-light;
    }
    .grid-bg::before{
      content:"";position:absolute;inset:0;
      background-image:radial-gradient(circle at 10% 0,rgba(56,189,248,.2) 0,transparent 44%),
                       radial-gradient(circle at 90% 10%,rgba(59,130,246,.2) 0,transparent 40%);
      opacity:.7;
    }
    .content{
      position:relative;
      display:flex;
      flex-direction:column;
      gap:14px;
      z-index:1;
    }
    .header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:14px;
    }
    .title-block{
      max-width:520px;
    }
    .eyebrow{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:4px 8px;
      border-radius:999px;
      background:rgba(15,23,42,.9);
      border:1px solid rgba(148,163,184,.5);
      color:var(--muted);
      font-size:11px;
      letter-spacing:.08em;
      text-transform:uppercase;
      margin-bottom:6px;
    }
    .eyebrow-dot{
      width:6px;height:6px;border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#f9fafb 0,#22c55e 55%,#166534 100%);
      box-shadow:0 0 10px rgba(34,197,94,.8);
    }
    h1{
      font-size:clamp(22px,3.2vw,30px);
      font-weight:650;
      letter-spacing:.01em;
      margin-bottom:4px;
    }
    .subtitle{
      font-size:13px;
      color:var(--muted);
      line-height:1.5;
    }
    .subtitle strong{color:#e5e7eb;font-weight:600}
    .meta{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:8px;
      font-size:11px;
      color:var(--muted);
    }
    .chips{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      justify-content:flex-end;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:3px 9px;
      border-radius:999px;
      background:linear-gradient(135deg,var(--chip-bg),#020617);
      border:1px solid rgba(148,163,184,.6);
      font-size:11px;
      color:var(--chip);
      box-shadow:0 0 0 1px rgba(15,23,42,.8);
    }
    .chip-dot{
      width:7px;height:7px;border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#e0f2fe 0,#60a5fa 45%,#1d4ed8 100%);
      box-shadow:0 0 12px rgba(59,130,246,.7);
    }
    .version-pill{
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.5);
      background:radial-gradient(circle at top,#1f2937 0,#020617 72%);
      color:var(--muted2);
      display:flex;
      align-items:center;
      gap:8px;
    }
    .version-pill strong{color:#e5e7eb;font-weight:600}
    .pill-dot{
      width:6px;height:6px;border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#fecaca 0,#f97373 48%,#b91c1c 100%);
      box-shadow:0 0 10px rgba(248,113,113,.6);
    }
    .layout{
      display:grid;
      grid-template-columns:minmax(0,2.1fr) minmax(0,1.2fr);
      gap:18px;
      align-items:stretch;
    }
    .panel{
      background:radial-gradient(circle at top,#020617 0,#020617 40%,#020617 100%);
      border-radius:22px;
      padding:14px 18px 14px;
      border:1px solid rgba(148,163,184,.3);
      box-shadow:var(--shadow-soft);
      position:relative;
      overflow:hidden;
    }
    .panel::before{
      content:"";position:absolute;inset:0;pointer-events:none;
      background:radial-gradient(circle at top left,rgba(59,130,246,.25) 0,transparent 55%),
                 radial-gradient(circle at top right,rgba(56,189,248,.25) 0,transparent 60%);
      opacity:.5;
    }
    .panel-inner{position:relative;z-index:1}
    .panel-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
    }
    .panel-title{
      font-size:13px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:8px;
    }
    .panel-dot{
      width:7px;height:7px;border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#f9fafb 0,#22c55e 48%,#15803d 100%);
      box-shadow:0 0 10px rgba(34,197,94,.8);
    }
    .panel-tag{
      font-size:11px;
      padding:3px 8px;
      border-radius:999px;
      background:rgba(15,23,42,.95);
      border:1px solid rgba(148,163,184,.4);
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:6px;
    }
    .panel-tag span{color:#e5e7eb;font-weight:500}
    .panel-tag code{
      font-family:"SF Mono","JetBrains Mono",monospace;
      font-size:11px;
      color:var(--chip);
    }
    .controls-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-bottom:12px;
      align-items:flex-end;
    }
    .field{
      flex:1 1 150px;
      min-width:140px;
      max-width:200px;
    }
    .label{
      font-size:11px;
      color:var(--muted);
      margin-bottom:3px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
    }
    .label span{
      font-size:10px;
      color:var(--muted2);
    }
    input[type="number"]{
      width:100%;
      padding:8px 10px;
      border-radius:10px;
      border:1px solid rgba(31,41,55,.9);
      background:rgba(15,23,42,.96);
      color:var(--ink);
      font-family:inherit;
      font-size:13px;
      outline:none;
      box-shadow:inset 0 0 0 1px rgba(15,23,42,.8),0 0 0 0 rgba(37,99,235,0);
      transition:.15s;
      text-align:center;
    }
    input[type="number"]:focus{
      border-color:rgba(59,130,246,.75);
      box-shadow:0 0 0 1px rgba(59,130,246,.6),0 0 22px rgba(37,99,235,.45);
    }
    .field-row{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .bpm-icon{
      width:26px;height:26px;border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#e5e7eb 0,#9ca3af 45%,#4b5563 100%);
      display:flex;justify-content:center;align-items:center;
      box-shadow:0 0 12px rgba(148,163,184,.7);
      flex-shrink:0;
    }
    .bpm-icon span{
      font-size:13px;font-weight:700;color:#020617;
    }
    .btn-mini{
      flex-shrink:0;
      padding:6px 8px;
      border-radius:9px;
      border:1px solid rgba(148,163,184,.4);
      background:rgba(15,23,42,.97);
      color:var(--muted);
      font-size:11px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:5px;
      box-shadow:0 10px 22px rgba(0,0,0,.35);
    }
    .btn-mini span{
      font-size:12px;
      color:var(--accent);
    }
    .btn-mini:hover{
      background:#020617;
      color:#e5e7eb;
    }
    .btn-strip{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin:4px 0 8px;
    }
    .chip-btn{
      border-radius:999px;
      padding:4px 9px;
      border:1px solid rgba(148,163,184,.35);
      background:rgba(15,23,42,.96);
      color:var(--muted2);
      font-size:11px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .chip-btn span{
      font-family:"SF Mono","JetBrains Mono",monospace;
      font-size:11px;
      color:#e5e7eb;
    }
    .chip-btn.primary{
      background:linear-gradient(135deg,#1d4ed8,#2563eb);
      color:#e5e7eb;
      border-color:#60a5fa;
      box-shadow:0 12px 28px rgba(37,99,235,.55);
    }
    .chip-btn.primary span{
      color:#e0f2fe;
    }
    .chip-btn:hover{
      transform:translateY(-1px);
      box-shadow:0 12px 24px rgba(15,23,42,.7);
    }
    .chip-btn:active{
      transform:translateY(0);
      box-shadow:none;
    }
    .readout-row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:stretch;
      margin-bottom:10px;
    }
    .readout-block{
      flex:1 1 180px;
      min-width:0;
      border-radius:14px;
      background:radial-gradient(circle at top left,#020617 0,var(--panel) 68%);
      border:1px solid rgba(55,65,81,.9);
      padding:8px 10px 9px;
      display:flex;
      flex-direction:column;
      gap:4px;
      box-shadow:0 14px 32px rgba(0,0,0,.5);
      position:relative;
      overflow:hidden;
    }
    .readout-block::before{
      content:"";position:absolute;inset:0;pointer-events:none;
      background:radial-gradient(circle at top right,rgba(59,130,246,.25) 0,transparent 55%);
      opacity:.6;
    }
    .readout-block .label{
      font-size:11px;
      color:var(--muted2);
      margin-bottom:0;
    }
    .bpm-main{
      display:flex;
      align-items:baseline;
      gap:6px;
      font-family:"SF Mono","JetBrains Mono",monospace;
    }
    .bpm-main .value{
      font-size:clamp(20px,2.8vw,26px);
      font-weight:700;
      letter-spacing:.03em;
      color:#f9fafb;
    }
    .bpm-main .unit{
      font-size:11px;
      color:var(--muted);
      text-transform:uppercase;
      letter-spacing:.12em;
    }
    .note{
      font-size:11px;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
      gap:6px;
    }
    .note strong{color:#e5e7eb;font-weight:500}
    .badge{
      font-size:10px;
      padding:2px 7px;
      border-radius:999px;
      background:rgba(15,23,42,.92);
      border:1px solid rgba(148,163,184,.45);
      color:var(--muted);
      display:inline-flex;
      align-items:center;
      gap:4px;
      text-transform:uppercase;
      letter-spacing:.08em;
    }
    .badge-dot{
      width:6px;height:6px;border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#fef9c3 0,#facc15 45%,#b45309 100%);
      box-shadow:0 0 10px rgba(250,204,21,.7);
    }
    .delta{
      font-family:"SF Mono","JetBrains Mono",monospace;
      font-size:13px;
      font-weight:600;
    }
    .delta.pos{
      color:var(--delta-pos);
    }
    .delta.neg{
      color:var(--delta-neg);
    }
    .delta-muted{
      font-size:11px;
      color:var(--muted2);
      font-family:system-ui,sans-serif;
    }
    .tap-section{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-top:4px;
    }
    .tap-row{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .tap-btn{
      padding:10px 16px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.45);
      background:radial-gradient(circle at top,#1f2937 0,#020617 68%);
      color:#e5e7eb;
      font-size:13px;
      font-weight:600;
      display:inline-flex;
      align-items:center;
      gap:8px;
      cursor:pointer;
      box-shadow:0 16px 30px rgba(0,0,0,.7);
      text-transform:uppercase;
      letter-spacing:.12em;
    }
    .tap-btn span{
      width:8px;height:8px;border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#facc15 0,#f97316 50%,#b91c1c 100%);
      box-shadow:0 0 12px rgba(248,113,113,.75);
    }
    .tap-btn:active{
      transform:translateY(1px);
      box-shadow:0 4px 10px rgba(0,0,0,.6);
    }
    .tap-meta{
      font-size:11px;
      color:var(--muted);
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .tap-meta span{
      display:inline-flex;
      align-items:center;
      gap:4px;
    }
    .tap-meta code{
      font-family:"SF Mono","JetBrains Mono",monospace;
      font-size:11px;
      color:#e5e7eb;
    }
    .tap-dot{
      width:6px;height:6px;border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#e0f2fe 0,#60a5fa 50%,#1d4ed8 100%);
      box-shadow:0 0 10px rgba(59,130,246,.7);
    }
    .fader-section{
      margin-top:3px;
      padding-top:10px;
      border-top:1px solid rgba(31,41,55,.9);
    }
    .fader-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:8px;
      font-size:11px;
      color:var(--muted);
    }
    .fader-header strong{color:#e5e7eb}
    .zoom-toggle{
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:11px;
      cursor:pointer;
      padding:3px 7px;
      border-radius:999px;
      background:rgba(15,23,42,.95);
      border:1px solid rgba(148,163,184,.4);
    }
    .zoom-toggle span{
      width:14px;height:14px;border-radius:999px;
      border:1px solid rgba(148,163,184,.6);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-size:12px;
      color:var(--accent);
    }
    .rail-wrap{
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:380px;
      margin:6px 0 18px;
      gap:20px;
    }
    .rail{
      position:relative;
      overflow:visible;
      width:70px;
      height:320px;
      border-radius:20px;
      background:var(--rail);
      border:1px solid #242b34;
      box-shadow:inset 0 0 0 1px #101317,0 10px 22px rgba(0,0,0,.25);
    }
    .rail .edge{
      position:absolute;
      left:6px;
      right:6px;
      top:8px;
      bottom:8px;
      border-radius:16px;
      background:var(--rail-edge);
      box-shadow:inset 0 0 0 1px rgba(15,23,42,.85);
    }
    .ticks{
      position:absolute;
      inset:10px 0 10px 0;
      pointer-events:none;
    }
    .tick{
      position:absolute;
      left:0;
      right:0;
      height:1px;
      background:var(--tick);
      opacity:.9;
    }
    .tick.long{
      background:var(--tick-strong);
      left:10px;
      right:10px;
    }
    .tick .label{
      position:absolute;
      left:-32px;
      top:-9px;
      width:24px;
      text-align:right;
      font-size:10px;
      color:var(--muted2);
      font-family:"SF Mono","JetBrains Mono",monospace;
    }
    .tick .label.right{
      left:auto;
      right:-32px;
      text-align:left;
    }
    .handle{
      position:absolute;
      left:50%;
      top:50%;
      width:54px;
      height:54px;
      transform:translate(-50%,-50%);
      border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#1f2937 0,#020617 52%,#020617 100%);
      box-shadow:0 18px 30px rgba(0,0,0,.8),0 0 0 1px #020617;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      user-select:none;
      touch-action:none;
    }
    .handle-inner{
      width:70%;
      height:70%;
      border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#111827 0,#020617 60%,#020617 100%);
      box-shadow:inset 0 0 0 1px #020617,0 0 0 1px rgba(148,163,184,.35);
      display:flex;
      align-items:center;
      justify-content:center;
      color:#e5e7eb;
      font-size:18px;
      font-weight:700;
      font-family:"SF Mono","JetBrains Mono",monospace;
      letter-spacing:.05em;
    }
    .handle-glow{
      position:absolute;
      inset:12px;
      border-radius:999px;
      border:1px solid rgba(59,130,246,.7);
      box-shadow:0 0 26px rgba(59,130,246,.8);
      opacity:0;
      pointer-events:none;
      transition:.18s;
    }
    .rail.active .handle-glow{
      opacity:1;
    }
    .handle-label{
      position:absolute;
      left:50%;
      top:calc(100% + 6px);
      transform:translateX(-50%);
      font-size:11px;
      color:var(--muted);
      text-align:center;
      width:110%;
    }
    .handle-label strong{
      color:#e5e7eb;
      font-weight:600;
    }
    .lock-badge{
      position:absolute;
      top:10px;
      right:10px;
      font-size:10px;
      padding:2px 7px;
      border-radius:999px;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(148,163,184,.45);
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:5px;
    }
    .lock-dot{
      width:6px;
      height:6px;
      border-radius:999px;
      background:radial-gradient(circle at 30% 30%,#bbf7d0 0,#22c55e 48%,#166534 100%);
      box-shadow:0 0 10px rgba(34,197,94,.8);
    }
    .lock-badge span{
      font-family:"SF Mono","JetBrains Mono",monospace;
      font-size:11px;
      color:#e5e7eb;
    }
    .mini-grid{
      position:absolute;
      inset:0;
      opacity:.55;
      mix-blend-mode:soft-light;
      pointer-events:none;
      background-image:
        radial-gradient(circle at 0 0,transparent 0,transparent 6px,#020617 6px,#020617 7px,transparent 7px),
        radial-gradient(circle at 100% 100%,transparent 0,transparent 4px,#020617 4px,#020617 5px,transparent 5px);
      background-size:28px 28px;
    }
    .right-panel{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .summary-card{
      border-radius:18px;
      background:radial-gradient(circle at top,#020617 0,#020617 36%,#020617 100%);
      border:1px solid rgba(148,163,184,.35);
      padding:10px 12px 9px;
      box-shadow:0 14px 32px rgba(0,0,0,.7);
      position:relative;
      overflow:hidden;
    }
    .summary-card::before{
      content:"";position:absolute;inset:0;pointer-events:none;
      background:radial-gradient(circle at 0 0,rgba(59,130,246,.35) 0,transparent 45%);
      opacity:.7;
    }
    .summary-inner{position:relative;z-index:1}
    .summary-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:6px;
      font-size:11px;
      color:var(--muted);
    }
    .summary-header strong{
      color:#e5e7eb;
      font-size:12px;
    }
    .summary-grid{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:8px;
      font-size:11px;
    }
    .summary-item{
      padding:6px 8px;
      border-radius:12px;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(55,65,81,.9);
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .summary-label{
      color:var(--muted2);
      display:flex;
      justify-content:space-between;
      gap:6px;
    }
    .summary-value{
      font-family:"SF Mono","JetBrains Mono",monospace;
      font-size:13px;
      font-weight:600;
      color:#f9fafb;
    }
    .summary-diff.pos{color:var(--delta-soft-pos)}
    .summary-diff.neg{color:var(--delta-soft-neg)}
    .summary-footer{
      margin-top:6px;
      font-size:11px;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
      gap:8px;
      flex-wrap:wrap;
    }
    .summary-footer code{
      font-family:"SF Mono","JetBrains Mono",monospace;
      font-size:11px;
      color:#e5e7eb;
    }
    .info-card{
      border-radius:18px;
      background:radial-gradient(circle at top,#020617 0,#020617 40%,#020617 100%);
      border:1px solid rgba(148,163,184,.35);
      padding:10px 12px;
      font-size:11px;
      color:var(--muted);
      box-shadow:0 14px 32px rgba(0,0,0,.65);
      position:relative;
      overflow:hidden;
    }
    .info-card::before{
      content:"";position:absolute;inset:0;pointer-events:none;
      background:radial-gradient(circle at 100% 0,rgba(59,130,246,.25) 0,transparent 55%);
      opacity:.8;
    }
    .info-inner{position:relative;z-index:1}
    .info-title{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:var(--muted);
      margin-bottom:4px;
    }
    .info-title strong{
      color:#e5e7eb;
    }
    .info-grid{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:7px;
    }
    .info-item{
      display:flex;
      align-items:flex-start;
      gap:6px;
    }
    .bullet{
      width:6px;
      height:6px;
      border-radius:999px;
      margin-top:4px;
      background:radial-gradient(circle at 30% 30%,#e0f2fe 0,#60a5fa 45%,#1d4ed8 100%);
      box-shadow:0 0 8px rgba(59,130,246,.6);
    }
    .info-item p{
      font-size:11px;
      color:var(--muted);
      line-height:1.45;
    }
    .info-item p strong{
      color:#e5e7eb;
      font-weight:500;
    }
    .fine-print{
      margin-top:6px;
      font-size:10px;
      color:var(--muted2);
    }
    .fine-print code{
      font-family:"SF Mono","JetBrains Mono",monospace;
      font-size:10px;
      color:#e5e7eb;
    }
    .footer-bar{
      margin-top:8px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:10px;
      color:var(--muted2);
      flex-wrap:wrap;
      gap:6px;
    }
    .footer-bar a{
      color:#bfdbfe;
      text-decoration:none;
    }
    .footer-bar a:hover{
      text-decoration:underline;
    }
    .kbd{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:1px 4px;
      border-radius:4px;
      background:#020617;
      border:1px solid #1f2937;
      font-family:"SF Mono","JetBrains Mono",monospace;
      font-size:10px;
      color:#e5e7eb;
      margin:0 2px;
    }
    @media (max-width:900px){
      .layout{
        grid-template-columns:1fr;
      }
      .right-panel{
        order:-1;
      }
      .panel{
        padding:12px 12px 14px;
      }
      .app-frame{
        padding:16px 14px 18px;
      }
    }
    @media (max-width:640px){
      .controls-row{
        flex-direction:column;
      }
      .field{
        max-width:none;
      }
      .rail-wrap{
        gap:14px;
        min-height:340px;
      }
      .rail{
        height:280px;
      }
      .readout-row{
        flex-direction:column;
      }
      .summary-grid{
        grid-template-columns:1fr;
      }
    }
  </style>
</head>
<body>
<div class="app-frame">
  <div class="grid-bg"></div>
  <div class="content">
    <div class="header">
      <div class="title-block">
        <div class="eyebrow">
          <div class="eyebrow-dot"></div>
          Herramienta de Estudio para Vinilos – Quartz Lock Mental
        </div>
        <h1>Dual Deck Vinyl Tempo Helper</h1>
        <p class="subtitle">
          Calcula el <strong>pitch exacto</strong> entre dos platos de vinilo y visualiza de forma intuitiva el
          margen del fader para mezclar <strong>temas con BPM diferentes</strong>. Pensado para practicar
          el “<strong>quartz lock mental</strong>” y afinar oído y mano.
        </p>
      </div>
      <div class="meta">
        <div class="chips">
          <div class="chip">
            <div class="chip-dot"></div>
            Diseñado para Technics 1200 / 1210 (±8%)
          </div>
          <div class="chip">
            <div class="chip-dot"></div>
            Códec mental para sesiones de House, Techno, D&amp;B...
          </div>
        </div>
        <div class="version-pill">
          <div class="pill-dot"></div>
          <span><strong>v21</strong> · Clicks ±0,1 · 1 decimal · Rango fino</span>
        </div>
      </div>
    </div>

    <div class="layout">
      <div class="panel">
        <div class="mini-grid"></div>
        <div class="panel-inner">
          <div class="panel-header">
            <div class="panel-title">
              <div class="panel-dot"></div>
              Configuración de Temas
            </div>
            <div class="panel-tag">
              <span>Deck A / Deck B</span>
              <code>BPM ± Pitch</code>
            </div>
          </div>

          <div class="controls-row">
            <div class="field">
              <div class="label">BPM del tema A <span>Referente</span></div>
              <div class="field-row">
                <div class="bpm-icon"><span>A</span></div>
                <input type="number" id="bpmA" min="60" max="180" step="0.01" value="126.00" />
              </div>
            </div>
            <div class="field">
              <div class="label">BPM del tema B <span>Objetivo a casar</span></div>
              <div class="field-row">
                <div class="bpm-icon"><span>B</span></div>
                <input type="number" id="bpmB" min="60" max="180" step="0.01" value="128.00" />
              </div>
            </div>
            <div class="field">
              <div class="label">Rango del Pitch <span>Relleno de ticks</span></div>
              <div class="field-row">
                <select id="pitchRange" style="flex:1 1 auto;padding:8px 10px;border-radius:10px;border:1px solid rgba(31,41,55,.9);background:rgba(15,23,42,.96);color:var(--ink);font-size:13px;outline:none;">
                  <option value="8">±8% (Technics clásico)</option>
                  <option value="10">±10% (algunos modelos)</option>
                  <option value="16">±16% (rango extendido)</option>
                </select>
              </div>
            </div>
          </div>

          <div class="btn-strip">
            <button class="chip-btn primary" type="button" id="matchToA">
              <span>→</span> Igualar B a A
            </button>
            <button class="chip-btn" type="button" id="halfTime">
              <span>÷2</span> Half time (D&amp;B ↔ House)
            </button>
            <button class="chip-btn" type="button" id="doubleTime">
              <span>×2</span> Double time (House ↔ D&amp;B)
            </button>
            <button class="chip-btn" type="button" id="swapAB">
              <span>⇄</span> Intercambiar A/B
            </button>
          </div>

          <div class="readout-row">
            <div class="readout-block">
              <div class="label">Tempo resultante en el Deck B</div>
              <div class="bpm-main">
                <span class="value" id="resultBpm">128.0</span>
                <span class="unit">BPM</span>
              </div>
              <div class="note">
                <span>
                  Desplazamiento necesario:
                  <span id="deltaPitchText" class="delta">+0.0%</span>
                </span>
                <span class="badge">
                  <span class="badge-dot"></span>
                  Sweet spot de pitch
                </span>
              </div>
            </div>

            <div class="readout-block">
              <div class="label">Desfase relativo entre A y B</div>
              <div class="bpm-main">
                <span class="value" id="diffBpm">+2.0</span>
                <span class="unit">BPM de diferencia</span>
              </div>
              <div class="note">
                <span id="diffComment">Tema B ligeramente más rápido</span>
                <span class="delta-muted">Ajusta hasta que el valor quede cercano a 0.0</span>
              </div>
            </div>
          </div>

          <div class="tap-section">
            <div class="tap-row">
              <button class="tap-btn" type="button" id="tapBtn">
                <span></span> TAP BPM
              </button>
              <div class="tap-meta">
                <span><div class="tap-dot"></div>Tapea <code>4–8 golpes</code> para medir BPM</span>
                <span>Se aplica al campo <code>B</code> de forma automática</span>
              </div>
            </div>
          </div>

          <div class="fader-section">
            <div class="fader-header">
              <div>Fader del plato B · Visualización de rango y posición ideal</div>
              <div class="zoom-toggle" id="zoomToggle">
                <span>±</span>
                Zoom en el centro del rango
              </div>
            </div>
            <div class="rail-wrap">
              <div class="rail" id="rail">
                <div class="edge"></div>
                <div class="ticks" id="ticks"></div>
                <div class="handle" id="handle">
                  <div class="handle-inner" id="handleText">0.0</div>
                  <div class="handle-glow"></div>
                  <div class="handle-label">
                    Ajuste objetivo: <strong id="targetLabel">0.0%</strong>
                  </div>
                </div>
                <div class="lock-badge">
                  <div class="lock-dot"></div>
                  Quartz lock mental: <span id="lockTarget">0.0%</span>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <div class="right-panel">
        <div class="summary-card">
          <div class="summary-inner">
            <div class="summary-header">
              <div>
                <strong>Resumen rápido de mezcla</strong>
                <div style="font-size:10px;color:var(--muted2)">Para sesiones reales en cabina</div>
              </div>
              <div class="badge">
                <div class="badge-dot"></div>
                Uso recomendado
              </div>
            </div>
            <div class="summary-grid">
              <div class="summary-item">
                <div class="summary-label">
                  <span>Pitch sugerido en B</span>
                  <span id="summaryDiff" class="summary-diff pos">+0.0%</span>
                </div>
                <div class="summary-value" id="summaryPitch">0.0%</div>
              </div>
              <div class="summary-item">
                <div class="summary-label">
                  <span>Diferencia de BPM</span>
                  <span id="summaryState">Zona segura</span>
                </div>
                <div class="summary-value" id="summaryDiffBpm">0.0</div>
              </div>
            </div>
            <div class="summary-footer">
              <span>
                Mantén el valor <code>Pitch B</code> lo más cercano posible al sugerido.  
                Si el desvío supera ±2.0%, considera cambiar de tema.
              </span>
            </div>
          </div>
        </div>

        <div class="info-card">
          <div class="info-inner">
            <div class="info-title"><strong>Cómo usarlo en tu práctica</strong></div>
            <div class="info-grid">
              <div class="info-item">
                <div class="bullet"></div>
                <p><strong>1. Elige un BPM base</strong> para tus sesiones (por ejemplo, 126 BPM en House).</p>
              </div>
              <div class="info-item">
                <div class="bullet"></div>
                <p><strong>2. Introduce el BPM real</strong> de cada disco en A y B. Usa el TAP si no lo conoces.</p>
              </div>
              <div class="info-item">
                <div class="bullet"></div>
                <p><strong>3. Mira el pitch sugerido</strong> para B y replica ese ajuste en el fader del plato.</p>
              </div>
              <div class="info-item">
                <div class="bullet"></div>
                <p><strong>4. Practica el quartz lock mental</strong>: intenta recordar la posición ideal sin mirar tanto el display.</p>
              </div>
            </div>
            <div class="fine-print">
              Para mezclar géneros muy distintos (<code>House ↔ D&amp;B</code>), usa los atajos de
              <code>Half/Double Time</code> y céntrate en cómo se “pega” la percusión al oído.
            </div>
          </div>
        </div>

        <div class="footer-bar">
          <span>Hecho por GuilTeach · Laboratorio de herramientas para DJs de vinilo</span>
          <span>
            Controles rápidos:
            <span class="kbd">Click</span> arrastra el fader ·
            <span class="kbd">Tap</span> marca BPM ·
            <span class="kbd">Zoom</span> para precisión fina
          </span>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const bpmAInput = document.getElementById('bpmA');
  const bpmBInput = document.getElementById('bpmB');
  const resultBpmEl = document.getElementById('resultBpm');
  const diffBpmEl = document.getElementById('diffBpm');
  const deltaPitchText = document.getElementById('deltaPitchText');
  const diffCommentEl = document.getElementById('diffComment');
  const pitchRangeSelect = document.getElementById('pitchRange');
  const rail = document.getElementById('rail');
  const ticksEl = document.getElementById('ticks');
  const handle = document.getElementById('handle');
  const handleText = document.getElementById('handleText');
  const targetLabel = document.getElementById('targetLabel');
  const lockTarget = document.getElementById('lockTarget');
  const matchToABtn = document.getElementById('matchToA');
  const halfTimeBtn = document.getElementById('halfTime');
  const doubleTimeBtn = document.getElementById('doubleTime');
  const swapABBtn = document.getElementById('swapAB');
  const zoomToggle = document.getElementById('zoomToggle');
  const tapBtn = document.getElementById('tapBtn');
  const summaryPitchEl = document.getElementById('summaryPitch');
  const summaryDiffEl = document.getElementById('summaryDiff');
  const summaryDiffBpmEl = document.getElementById('summaryDiffBpm');
  const summaryStateEl = document.getElementById('summaryState');

  let zoomCentered = false;
  let targetPitch = 0;
  let tapTimes = [];

  function parse(val, fallback){
    const n = parseFloat(val);
    return Number.isFinite(n) ? n : fallback;
  }

  function compute(){
    const bpmA = parse(bpmAInput.value, 126);
    const bpmB = parse(bpmBInput.value, 128);
    const range = parseFloat(pitchRangeSelect.value || '8');

    const diffBpm = bpmB - bpmA;
    const neededPitch = ((bpmA / bpmB) - 1) * 100 * -1;

    const resBpm = bpmB * (1 + neededPitch/100);

    resultBpmEl.textContent = resBpm.toFixed(1);
    diffBpmEl.textContent = (bpmB - bpmA).toFixed(1);

    targetPitch = neededPitch;
    handleText.textContent = neededPitch.toFixed(1);
    targetLabel.textContent = neededPitch.toFixed(1) + '%';
    lockTarget.textContent = neededPitch.toFixed(1) + '%';

    const diffAbs = Math.abs(diffBpm);
    diffBpmEl.textContent = diffBpm >= 0 ? '+'+diffBpm.toFixed(1) : diffBpm.toFixed(1);

    if(diffAbs < 0.2){
      diffCommentEl.textContent = 'Prácticamente clavados. Ideal para mezclas largas.';
    }else if(diffAbs < 1.0){
      diffCommentEl.textContent = 'Muy cerca. Ajusta un poco el pitch y escucha el hi-hat.';
    }else if(diffAbs < 2.0){
      diffCommentEl.textContent = 'Diferencia apreciable. Mezcla corta o juega con efectos.';
    }else{
      diffCommentEl.textContent = 'Diferencia grande. Considera otro tema o un cambio drástico.';
    }

    summaryPitchEl.textContent = neededPitch.toFixed(1) + '%';
    summaryDiffBpmEl.textContent = diffBpm >= 0 ? '+'+diffBpm.toFixed(1) : diffBpm.toFixed(1);

    if(diffAbs < 0.5){
      summaryStateEl.textContent = 'Zona segura';
      summaryDiffEl.textContent = (neededPitch>=0?'+':'') + neededPitch.toFixed(1) + '%';
      summaryDiffEl.className = 'summary-diff pos';
    }else if(diffAbs < 2){
      summaryStateEl.textContent = 'Zona intermedia';
      summaryDiffEl.textContent = (neededPitch>=0?'+':'') + neededPitch.toFixed(1) + '%';
      summaryDiffEl.className = 'summary-diff pos';
    }else{
      summaryStateEl.textContent = 'Zona de riesgo';
      summaryDiffEl.textContent = (neededPitch>=0?'+':'') + neededPitch.toFixed(1) + '%';
      summaryDiffEl.className = 'summary-diff neg';
    }

    if(neededPitch > 0){
      deltaPitchText.textContent = '+'+neededPitch.toFixed(1)+'%';
      deltaPitchText.className = 'delta pos';
    } else if(neededPitch < 0){
      deltaPitchText.textContent = neededPitch.toFixed(1)+'%';
      deltaPitchText.className = 'delta neg';
    } else {
      deltaPitchText.textContent = '0.0%';
      deltaPitchText.className = 'delta';
    }

    drawTicks(range, neededPitch);
    positionHandle(range, neededPitch);
  }

  function drawTicks(range, target){
    ticksEl.innerHTML = '';
    const totalHeight = rail.clientHeight - 20;
    const centerY = totalHeight / 2;
    const max = range;
    const step = 1;

    for(let p = -max; p <= max; p += step){
      const ratio = (p / max);
      const y = centerY - ratio * centerY;

      const tick = document.createElement('div');
      tick.className = 'tick' + (p % 2 === 0 ? ' long' : '');
      tick.style.top = (10 + y) + 'px';

      if(p % 2 === 0){
        const label = document.createElement('div');
        label.className = 'label' + (p > 0 ? ' right' : '');
        label.textContent = (p > 0 ? '+' : '') + p.toFixed(0);
        tick.appendChild(label);
      }

      ticksEl.appendChild(tick);
    }

    const midTick = document.createElement('div');
    midTick.className = 'tick long';
    midTick.style.top = (10 + centerY) + 'px';
    const label = document.createElement('div');
    label.className = 'label';
    label.textContent = '0';
    midTick.appendChild(label);
    ticksEl.appendChild(midTick);
  }

  function positionHandle(range, pitch){
    const totalHeight = rail.clientHeight - 20;
    const centerY = totalHeight / 2;
    const max = range;
    const ratio = (pitch / max);
    const y = centerY - ratio * centerY;
    handle.style.top = (10 + y) + 'px';

    rail.classList.add('active');
    clearTimeout(positionHandle._t);
    positionHandle._t = setTimeout(()=>rail.classList.remove('active'),400);
  }

  function onMatchToA(){
    bpmBInput.value = bpmAInput.value;
    compute();
  }

  function onHalfTime(){
    const bpmB = parse(bpmBInput.value, 128);
    bpmBInput.value = (bpmB / 2).toFixed(2);
    compute();
  }

  function onDoubleTime(){
    const bpmB = parse(bpmBInput.value, 128);
    bpmBInput.value = (bpmB * 2).toFixed(2);
    compute();
  }

  function onSwapAB(){
    const a = bpmAInput.value;
    bpmAInput.value = bpmBInput.value;
    bpmBInput.value = a;
    compute();
  }

  function onZoomToggle(){
    zoomCentered = !zoomCentered;
    if(zoomCentered){
      zoomToggle.innerHTML = '<span>±</span> Zoom centrado activo';
      rail.style.height = '260px';
    }else{
      zoomToggle.innerHTML = '<span>±</span> Zoom en el centro del rango';
      rail.style.height = '320px';
    }
    compute();
  }

  function onTap(){
    const now = Date.now();
    tapTimes.push(now);
    tapTimes = tapTimes.filter(t => now - t < 6000);

    if(tapTimes.length >= 2){
      const intervals = [];
      for(let i=1;i<tapTimes.length;i++){
        intervals.push(tapTimes[i]-tapTimes[i-1]);
      }
      const avg = intervals.reduce((a,b)=>a+b,0)/intervals.length;
      const bpm = 60000/avg;
      bpmBInput.value = bpm.toFixed(2);
      compute();
    }
  }

  let dragging = false;
  let startY = 0;
  let startPitch = 0;

  function onHandleDown(e){
    dragging = true;
    startY = e.touches ? e.touches[0].clientY : e.clientY;
    startPitch = targetPitch;
    document.addEventListener('mousemove', onHandleMove);
    document.addEventListener('mouseup', onHandleUp);
    document.addEventListener('touchmove', onHandleMove,{passive:false});
    document.addEventListener('touchend', onHandleUp);
  }

  function onHandleMove(e){
    if(!dragging) return;
    e.preventDefault();
    const currentY = e.touches ? e.touches[0].clientY : e.clientY;
    const dy = currentY - startY;
    const range = parseFloat(pitchRangeSelect.value || '8');
    const totalHeight = rail.clientHeight - 20;
    const sensitivity = range * 2 / totalHeight;
    const deltaPitch = -dy * sensitivity;

    const newPitch = startPitch + deltaPitch;
    handleText.textContent = newPitch.toFixed(1);
    targetLabel.textContent = newPitch.toFixed(1) + '%';
    lockTarget.textContent = newPitch.toFixed(1) + '%';

    positionHandle(range, newPitch);
  }

  function onHandleUp(){
    dragging = false;
    document.removeEventListener('mousemove', onHandleMove);
    document.removeEventListener('mouseup', onHandleUp);
    document.removeEventListener('touchmove', onHandleMove);
    document.removeEventListener('touchend', onHandleUp);
  }

  bpmAInput.addEventListener('input', compute);
  bpmBInput.addEventListener('input', compute);
  pitchRangeSelect.addEventListener('change', compute);
  matchToABtn.addEventListener('click', onMatchToA);
  halfTimeBtn.addEventListener('click', onHalfTime);
  doubleTimeBtn.addEventListener('click', onDoubleTime);
  swapABBtn.addEventListener('click', onSwapAB);
  zoomToggle.addEventListener('click', onZoomToggle);
  tapBtn.addEventListener('click', onTap);
  handle.addEventListener('mousedown', onHandleDown);
  handle.addEventListener('touchstart', onHandleDown,{passive:false});

  compute();
})();
</script>
</body>
</html>
